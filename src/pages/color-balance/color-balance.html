<h4>Color Balance</h4>
<div class="row pt-3">
  <div class="col-md-12">
    <div class="card bg-light border-secondary">
      <div class="card-body">
        <h5 class="card-title">What does it do?</h5>
        <p class="card-text">
          Your camera's sensor responds differently to red,
          green, and blue light. For example the Atik 314E is most sensitive to green but least sensitive
          to red. The Altair 290M is most sensitive to red but least sensitive to blue. The purpose of color
          balancing is to discover the relative sensitivity expressed as ratios. We use those ratios to
          determine proper exposure.
        </p>
        <p class="card-text">
          Please read the instructions found <a href="#color-balance-instructions" target="_blank">here</a>.
          This calculator is actually the final step in a multi-step procedure. Once you go through this
          process please record the ratios. You will use them often. They are good for your particular camera
          and filters used. If either changes then you to need to rediscover the ratios for the new camera
          and filters.
        </p>
      </div>
    </div>
  </div>
</div>
<div class="row pt-4">
  <div class="col-md-10">
    <h5>Red filter</h5>
    <table class="table table-sm table-danger">
      <thead>
        <tr class="table-light">
          <th>Flux (uncorrected)</th>
          <th>Altitude</th>
          <th>Extinction</th>
          <th>Flux (corrected)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody data-bind="foreach: redMeasurements">
        <tr>
          <td><input type="text" class="form-control" data-bind="value: FluxUncorrected, valueUpdate: 'input'"></td>
          <td><input type="text" class="form-control" data-bind="value: Altitude, valueUpdate: 'input'"></td>
          <td><input type="text" readonly class="form-control-plaintext" data-bind="value: ExtinctionFmt"></td>
          <td><input type="text" readonly class="form-control-plaintext" data-bind="value: FluxCorrectedFmt"></td>
          <td>
            <div class="btn-group">
              <button type="button" class="btn btn-light" data-bind="click: $component.deleteRed">Delete</button>
            </div>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="active">
          <td><input type="text" class="form-control" data-bind="value: newRedMeasurement.FluxUncorrected"></td>
          <td><input type="text" class="form-control" data-bind="value: newRedMeasurement.Altitude"></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>
            <div class="btn-group">
              <button type="button" class="btn btn-light" data-bind="click: saveNewRed">New</button>
            </div>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<div class="row pt-3">
  <div class="col-md-10">
    <h5>Green filter</h5>
    <table class="table table-sm table-success">
      <thead>
        <tr class="table-light">
          <th>Flux (uncorrected)</th>
          <th>Altitude</th>
          <th>Extinction</th>
          <th>Flux (corrected)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody data-bind="foreach: greenMeasurements">
        <tr>
          <td><input type="text" class="form-control" data-bind="value: FluxUncorrected, valueUpdate: 'input'"></td>
          <td><input type="text" class="form-control" data-bind="value: Altitude, valueUpdate: 'input'"></td>
          <td><input type="text" readonly class="form-control-plaintext" data-bind="value: ExtinctionFmt"></td>
          <td><input type="text" readonly class="form-control-plaintext" data-bind="value: FluxCorrectedFmt"></td>
          <td>
            <div class="btn-group">
              <button type="button" class="btn btn-light" data-bind="click: $component.deleteGreen">Delete</button>
            </div>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="active">
          <td><input type="text" class="form-control" data-bind="value: newGreenMeasurement.FluxUncorrected"></td>
          <td><input type="text" class="form-control" data-bind="value: newGreenMeasurement.Altitude"></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>
            <div class="btn-group">
              <button type="button" class="btn btn-light" data-bind="click: saveNewGreen">New</button>
            </div>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<div class="row pt-3">
  <div class="col-md-10">
    <h5>Blue filter</h5>
    <div class="table-responsive">
      <table class="table table-sm table-info">
        <thead>
          <tr class="table-light">
            <th>Flux (uncorrected)</th>
            <th>Altitude</th>
            <th>Extinction</th>
            <th>Flux (corrected)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: blueMeasurements">
          <tr>
            <td><input type="text" class="form-control" data-bind="value: FluxUncorrected, valueUpdate: 'input'"></td>
            <td><input type="text" class="form-control" data-bind="value: Altitude, valueUpdate: 'input'"></td>
            <td><input type="text" readonly class="form-control-plaintext" data-bind="value: ExtinctionFmt"></td>
            <td><input type="text" readonly class="form-control-plaintext" data-bind="value: FluxCorrectedFmt"></td>
            <td>
              <div class="btn-group">
                <button type="button" class="btn btn-light" data-bind="click: $component.deleteBlue">Delete</button>
              </div>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="active">
            <td><input type="text" class="form-control" data-bind="value: newBlueMeasurement.FluxUncorrected"></td>
            <td><input type="text" class="form-control" data-bind="value: newBlueMeasurement.Altitude"></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>
              <div class="btn-group">
                <button type="button" class="btn btn-light" data-bind="click: saveNewBlue">New</button>
              </div>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>
<div class="row pt-3">
  <div class="col-md-6">
    <h5>Color Balance Results</h5>
    <div class="table-responsive">
      <table class="table table-sm">
        <thead>
          <tr class="table-light">
            <th style="width:30%">Filter</th>
            <th style="width:40%">Avg. Flux (corrected)</th>
            <th style="width:30%">Ratio</th>
          </tr>
        </thead>
        <tbody>
          <tr class="table-danger">
            <td>Red</td>
            <td><span data-bind="text: resultRedAverageFlux"></span></td>
            <td><span data-bind="text: resultRedRatio"></span></td>
          </tr>
          <tr class="table-success">
            <td>Green</td>
            <td><span data-bind="text: resultGreenAverageFlux"></span></td>
            <td><span data-bind="text: resultGreenRatio"></span></td>
          </tr>
          <tr class="table-info">
            <td>Blue</td>
            <td><span data-bind="text: resultBlueAverageFlux"></span></td>
            <td><span data-bind="text: resultBlueRatio"></span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
